(this["webpackJsonparound-react"]=this["webpackJsonparound-react"]||[]).push([[0],{14:function(e,t,n){},16:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),r=n(6),i=n.n(r),s=n(9),o=n(2),u=(n(14),n.p+"static/media/logo.4e8e0a1d.svg"),l=n(0);var p=function(){return Object(l.jsx)("div",{className:"header",children:Object(l.jsx)("img",{src:u,alt:"around the US logo",className:"header__logo"})})},d=c.a.createContext();var _=function(e){var t=e.onCardClick,n=e.card,a=e.onCardLike,r=e.onCardDelete,i=c.a.useContext(d),s=n.owner._id===i._id,o="card__delete-button ".concat(s?"card__delete-button_state_visible":"card__delete-button_state_hidden"),u=n.likes.some((function(e){return e._id===i._id})),p="card__like-button ".concat(u&&"card__like-button_state_active");return Object(l.jsx)(c.a.Fragment,{children:Object(l.jsxs)("article",{className:"card",children:[Object(l.jsx)("button",{"aria-label":"delete",type:"button",className:o,onClick:function(){r(n)}}),Object(l.jsx)("img",{src:n.link,alt:n.name,className:"card__image",onClick:function(){t(n)}}),Object(l.jsxs)("div",{className:"card__inner",children:[Object(l.jsx)("h2",{className:"card__title",children:n.name}),Object(l.jsxs)("div",{className:"card__likes-container",children:[Object(l.jsx)("button",{"aria-label":"like",type:"button",className:p,onClick:function(){a(n)}}),Object(l.jsx)("span",{className:"card__likes-count",children:n.likes.length})]})]})]})})};var b=function(e){var t=e.onCardClick,n=e.onEditAvatarClick,a=e.onEditProfileClick,r=e.onAddPlaceClick,i=e.handleCardLike,s=e.handleCardDelete,o=e.cards,u=c.a.useContext(d);return Object(l.jsx)(l.Fragment,{children:Object(l.jsxs)("div",{className:"page",children:[Object(l.jsxs)("section",{className:"profile",children:[Object(l.jsxs)("div",{className:"profile__image-container",children:[Object(l.jsx)("img",{src:u.avatar,alt:u.name,className:"profile__image"}),Object(l.jsx)("button",{className:"profile__button profile__button_type_image",onClick:n})]}),Object(l.jsxs)("div",{className:"profile__info",children:[Object(l.jsxs)("div",{className:"profile__inner",children:[Object(l.jsx)("h1",{className:"profile__name",children:u.name}),Object(l.jsx)("button",{"aria-label":"edit",type:"button",className:"profile__button profile__button-hover profile__button_type_edit",onClick:a})]}),Object(l.jsx)("p",{className:"profile__description",children:u.about})]}),Object(l.jsx)("button",{"aria-label":"add",type:"button",className:"profile__button profile__button-hover profile__button_type_add",onClick:r})]}),Object(l.jsx)("section",{className:"cards",children:o.map((function(e){return Object(l.jsx)(_,{card:e,onCardClick:t,onCardLike:i,onCardDelete:s},e._id)}))})]})})};var j=function(){return Object(l.jsx)(c.a.Fragment,{children:Object(l.jsx)("footer",{className:"footer",children:Object(l.jsx)("p",{className:"footer__copyright",children:"\xa9 2021 Around The U.S."})})})},h=n(7),m=n(8),f=new(function(){function e(t){var n=t.baseUrl,a=t.headers;Object(h.a)(this,e),this._customFetch=function(e,t){return fetch(e,t).then((function(e){return e.ok?e.json():Promise.reject(e.statusText)}))},this._headers=a,this._baseUrl=n}return Object(m.a)(e,[{key:"getInitialCards",value:function(){return this._customFetch("".concat(this._baseUrl,"/cards"),{headers:this._headers})}},{key:"getUserinfo",value:function(){return this._customFetch("".concat(this._baseUrl,"/users/me"),{headers:this._headers})}},{key:"updateUserInfo",value:function(e){return this._customFetch("".concat(this._baseUrl,"/users/me"),{headers:this._headers,method:"PATCH",body:JSON.stringify({name:e.name,about:e.about})})}},{key:"createCard",value:function(e){return this._customFetch("".concat(this._baseUrl,"/cards"),{headers:this._headers,method:"POST",body:JSON.stringify(e)})}},{key:"deleteCard",value:function(e){return this._customFetch("".concat(this._baseUrl,"/cards/").concat(e),{headers:this._headers,method:"DELETE"})}},{key:"changeLikeCardStatus",value:function(e,t){return this._customFetch("".concat(this._baseUrl,"/cards/likes/").concat(e),{headers:this._headers,method:t?"PUT":"DELETE"})}},{key:"setUserAvatar",value:function(e){var t=e.avatar;return this._customFetch("".concat(this._baseUrl,"/users/me/avatar"),{headers:this._headers,method:"PATCH",body:JSON.stringify({avatar:t})})}}]),e}())({baseUrl:"https://around.nomoreparties.co/v1/group-12",headers:{authorization:"777d758a-9062-4c9b-9afe-60fcbfab24e6","Content-Type":"application/json"}});var O=function(e){var t=e.isOpen,n=e.name,a=e.title,c=e.onClose,r=e.children,i=e.submitText,s=e.onSubmit;return Object(l.jsx)(l.Fragment,{children:Object(l.jsx)("section",{className:"popup popup_type_".concat(n,", ").concat(t&&"popup_visible"),children:Object(l.jsxs)("div",{className:"popup__container",children:[Object(l.jsx)("button",{"aria-label":"exit",type:"button",className:"popup__exit-button",onClick:c}),Object(l.jsxs)("form",{className:"popup__form popup__".concat(n,"-form"),onSubmit:s,children:[Object(l.jsx)("h2",{className:"popup__title",children:a}),r,Object(l.jsx)("button",{type:"submit",className:"popup__submit-button",children:i})]})]})})})};var x=function(e){var t=e.isOpen,n=e.onClose,a=e.card;return Object(l.jsx)("div",{className:"popup popup_type_image ".concat(t&&"popup_visible"),children:Object(l.jsxs)("div",{className:"popup__container",children:[Object(l.jsx)("button",{"aria-label":"exit",type:"button",className:"popup__exit-button popup__exit-image",onClick:n}),Object(l.jsxs)("figure",{className:"popup__figure",children:[Object(l.jsx)("img",{className:"popup__figure-image",src:a.link,alt:a.name}),Object(l.jsx)("figcaption",{className:"popup__figure-caption",children:a.name})]})]})})};var v=function(e){var t=e.isOpen,n=e.onClose,a=e.onUpdateUser,r=c.a.useState(""),i=Object(o.a)(r,2),s=i[0],u=i[1],p=c.a.useState(""),_=Object(o.a)(p,2),b=_[0],j=_[1],h=c.a.useContext(d);return c.a.useEffect((function(){u(h.name||""),j(h.about||"")}),[h]),Object(l.jsxs)(O,{name:"edit",title:"Edit profile",submitText:"Save",isOpen:t,onClose:n,onSubmit:function(e){e.preventDefault(),a({name:s,about:b})},children:[Object(l.jsxs)("label",{className:"popup__input-label",children:[Object(l.jsx)("input",{className:"popup__input popup__input_content_name",type:"text",name:"name",id:"input-name",placeholder:"Name",minLength:2,maxLength:40,required:!0,value:s,onChange:function(e){u(e.target.value)}}),Object(l.jsx)("span",{className:"popup__input-error input-name-error"})]}),Object(l.jsxs)("label",{className:"popup__input-label",children:[Object(l.jsx)("input",{className:"popup__input popup__input_content_description",type:"text",name:"about",id:"input-description",placeholder:"Job",minLength:2,maxLength:200,required:!0,value:b,onChange:function(e){j(e.target.value)}}),Object(l.jsx)("span",{className:"popup__input-error input-description-error"})]})]})};var C=function(e){var t=e.isOpen,n=e.onClose,a=e.onUpdateAvatar,r=c.a.useRef("");return Object(l.jsx)(O,{name:"image",title:"Update profile picture",submitText:"Save",isOpen:t,onClose:n,onSubmit:function(e){e.preventDefault(),a({avatar:r.current.value})},children:Object(l.jsxs)("label",{className:"popup__input-label",children:[Object(l.jsx)("input",{className:"popup__input popup__input_content_profile-image",type:"url",name:"link",id:"input-avatar",placeholder:"Image link",required:!0,ref:r}),Object(l.jsx)("span",{className:"popup__input-error input-avatar-error"})]})})};var g=function(e){var t=e.isOpen,n=e.onClose,a=e.onAddPlace,r=c.a.useState(""),i=Object(o.a)(r,2),s=i[0],u=i[1],p=c.a.useState(""),d=Object(o.a)(p,2),_=d[0],b=d[1];return Object(l.jsxs)(O,{name:"add",title:"New place",submitText:"Create",isOpen:t,onClose:n,onSubmit:function(e){e.preventDefault(),a({name:s,link:_})},children:[Object(l.jsxs)("label",{className:"popup__input-label",children:[Object(l.jsx)("input",{className:"popup__input popup__input_content_title",type:"text",name:"name",id:"input-title",placeholder:"Title",required:"1",maxLength:"30",onChange:function(e){u(e.target.value)}}),Object(l.jsx)("span",{className:"popup__input-error input-title-error"})]}),Object(l.jsxs)("label",{className:"popup__input-label",children:[Object(l.jsx)("input",{className:"popup__input popup__input_content_link",type:"url",name:"link",id:"input-image",placeholder:"Image link",required:!0,onChange:function(e){b(e.target.value)}}),Object(l.jsx)("span",{className:"popup__input-error input-image-error"})]})]})};var N=function(){var e=Object(a.useState)({}),t=Object(o.a)(e,2),n=t[0],r=t[1],i=Object(a.useState)(!1),u=Object(o.a)(i,2),_=u[0],h=u[1],m=Object(a.useState)(!1),N=Object(o.a)(m,2),k=N[0],y=N[1],S=Object(a.useState)(!1),U=Object(o.a)(S,2),T=U[0],F=U[1],A=Object(a.useState)(!1),E=Object(o.a)(A,2),L=E[0],P=E[1],D=Object(a.useState)({}),I=Object(o.a)(D,2),J=I[0],q=I[1],w=Object(a.useState)([]),B=Object(o.a)(w,2),H=B[0],z=B[1];c.a.useEffect((function(){f.getUserinfo().then(q).catch((function(e){return console.error("user info error",e)}))}),[]),c.a.useEffect((function(){f.getInitialCards().then(z).catch((function(e){return console.error("initial cards error",e)}))}),[]);var M=function(){h(!1),y(!1),F(!1),P(!1)};return Object(l.jsx)(d.Provider,{value:J,children:Object(l.jsxs)("div",{className:"page",children:[Object(l.jsx)(p,{}),Object(l.jsx)(b,{onEditProfileClick:function(){h(!0)},onAddPlaceClick:function(){y(!0)},onEditAvatarClick:function(){F(!0)},onCardClick:function(e){r(e),P(!0)},closeAllPopups:M,handleCardLike:function(e){var t=e.likes.some((function(e){return e._id===J._id}));f.changeLikeCardStatus(e._id,!t).then((function(t){z((function(n){return n.map((function(n){return n._id===e._id?t:n}))}))})).catch((function(e){return console.error("like card error",e)}))},handleCardDelete:function(e){f.deleteCard(e._id).then((function(){z(H.filter((function(t){return t._id!==e._id})))})).catch((function(e){return console.error("delete card error",e)}))},cards:H,currentUser:J}),Object(l.jsx)(v,{isOpen:_,onClose:M,onUpdateUser:function(e){f.updateUserInfo(e).then(q).then(M).catch((function(e){return console.error("update user error",e)}))}}),Object(l.jsx)(C,{isOpen:T,onClose:M,onUpdateAvatar:function(e){f.setUserAvatar(e).then(q).then(M).catch((function(e){return console.error("update avatar error",e)}))}}),Object(l.jsx)(g,{isOpen:k,onClose:M,onAddPlace:function(e){f.createCard(e).then((function(e){z([e].concat(Object(s.a)(H)))})).then(M).catch((function(e){return console.error("add place error",e)}))}}),Object(l.jsx)(O,{name:"delete",title:"Are you sure?",submitText:"Yes",onClose:M}),Object(l.jsx)(x,{card:n,isOpen:L,onClose:M}),Object(l.jsx)(j,{})]})})},k=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,17)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),a(e),c(e),r(e),i(e)}))};i.a.render(Object(l.jsx)(c.a.StrictMode,{children:Object(l.jsx)(N,{})}),document.getElementById("root")),k()}},[[16,1,2]]]);
//# sourceMappingURL=main.b6e18040.chunk.js.map