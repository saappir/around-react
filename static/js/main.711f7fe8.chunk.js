(this["webpackJsonparound-react"]=this["webpackJsonparound-react"]||[]).push([[0],{14:function(e,t,n){},16:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(6),i=n.n(c),s=n(9),o=n(2),l=(n(14),n.p+"static/media/logo.4e8e0a1d.svg"),u=n(0);var p=function(){return Object(u.jsx)("div",{className:"header",children:Object(u.jsx)("img",{src:l,alt:"around the US logo",className:"header__logo"})})};var d=function(e){var t=e.isOpen,n=e.name,a=e.title,r=e.onClose,c=e.children,i=e.submitText,s=e.onSubmit;return Object(u.jsx)(u.Fragment,{children:Object(u.jsx)("section",{className:"popup popup_type_".concat(n,", ").concat(t&&"popup_visible"),children:Object(u.jsxs)("div",{className:"popup__container",children:[Object(u.jsx)("button",{"aria-label":"exit",type:"button",className:"popup__exit-button",onClick:r}),Object(u.jsxs)("form",{className:"popup__form popup__".concat(n,"-form"),onSubmit:s,children:[Object(u.jsx)("h2",{className:"popup__title",children:a}),c,Object(u.jsx)("button",{type:"submit",className:"popup__submit-button",children:i})]})]})})})};var b=function(e){var t=e.isOpen,n=e.onClose,a=e.card;return Object(u.jsx)("div",{className:"popup popup_type_image ".concat(t&&"popup_visible"),children:Object(u.jsxs)("div",{className:"popup__container",children:[Object(u.jsx)("button",{"aria-label":"exit",type:"button",className:"popup__exit-button popup__exit-image",onClick:n}),Object(u.jsxs)("figure",{className:"popup__figure",children:[Object(u.jsx)("img",{className:"popup__figure-image",src:a.link,alt:a.name}),Object(u.jsx)("figcaption",{className:"popup__figure-caption",children:a.name})]})]})})},_=r.a.createContext();var j=function(e){var t=e.onCardClick,n=e.card,a=e.onCardLike,c=e.onCardDelete,i=r.a.useContext(_),s=n.owner._id===i._id,o="card__delete-button ".concat(s?"card__delete-button_state_visible":"card__delete-button_state_hidden"),l=n.likes.some((function(e){return e._id===i._id})),p="card__like-button ".concat(l&&"card__like-button_state_active");return Object(u.jsx)(r.a.Fragment,{children:Object(u.jsxs)("article",{className:"card",children:[Object(u.jsx)("button",{"aria-label":"delete",type:"button",className:o,onClick:function(){c(n)}}),Object(u.jsx)("img",{src:n.link,alt:n.name,className:"card__image",onClick:function(){t(n)}}),Object(u.jsxs)("div",{className:"card__inner",children:[Object(u.jsx)("h2",{className:"card__title",children:n.name}),Object(u.jsxs)("div",{className:"card__likes-container",children:[Object(u.jsx)("button",{"aria-label":"like",type:"button",className:p,onClick:function(){a(n)}}),Object(u.jsx)("span",{className:"card__likes-count",children:n.likes.length})]})]})]})})};var m=function(e){var t=e.isOpen,n=e.onClose,a=e.onUpdateUser,c=r.a.useState(""),i=Object(o.a)(c,2),s=i[0],l=i[1],p=r.a.useState(""),b=Object(o.a)(p,2),j=b[0],m=b[1],h=r.a.useContext(_);return r.a.useEffect((function(){l(h.name),m(h.about)}),[h]),Object(u.jsxs)(d,{name:"edit",title:"Edit profile",submitText:"Save",isOpen:t,onClose:n,onSubmit:function(e){e.preventDefault(),a({name:s,about:j})},children:[Object(u.jsxs)("label",{className:"popup__input-label",children:[Object(u.jsx)("input",{className:"popup__input popup__input_content_name",type:"text",name:"name",id:"input-name",placeholder:"Name",minLength:2,maxLength:40,required:!0,value:s,onChange:function(e){l(e.target.value)}}),Object(u.jsx)("span",{className:"popup__input-error input-name-error"})]}),Object(u.jsxs)("label",{className:"popup__input-label",children:[Object(u.jsx)("input",{className:"popup__input popup__input_content_description",type:"text",name:"about",id:"input-description",placeholder:"Job",minLength:2,maxLength:200,required:!0,value:j,onChange:function(e){m(e.target.value)}}),Object(u.jsx)("span",{className:"popup__input-error input-description-error"})]})]})};var h=function(e){var t=e.isOpen,n=e.onClose,a=e.onUpdateAvatar,c=r.a.useRef(""),i=r.a.useState(),s=Object(o.a)(i,2),l=s[0],p=s[1];return Object(u.jsx)(d,{name:"image",title:"Update profile picture",submitText:"Save",isOpen:t,onClose:n,onSubmit:function(e){e.preventDefault(),a({avatar:l})},children:Object(u.jsxs)("label",{className:"popup__input-label",children:[Object(u.jsx)("input",{className:"popup__input popup__input_content_profile-image",type:"url",name:"link",id:"input-avatar",placeholder:"Image link",required:!0,onChange:function(e){p(e.target.value)},ref:c}),Object(u.jsx)("span",{className:"popup__input-error input-avatar-error"})]})})};var f=function(e){var t=e.isOpen,n=e.onClose,a=e.onAddPlace,c=r.a.useState(""),i=Object(o.a)(c,2),s=i[0],l=i[1],p=r.a.useState(""),b=Object(o.a)(p,2),_=b[0],j=b[1];return Object(u.jsxs)(d,{name:"add",title:"New place",submitText:"Create",isOpen:t,onClose:n,onSubmit:function(e){e.preventDefault(),a({name:s,link:_})},children:[Object(u.jsxs)("label",{className:"popup__input-label",children:[Object(u.jsx)("input",{className:"popup__input popup__input_content_title",type:"text",name:"name",id:"input-title",placeholder:"Title",required:"1",maxLength:"30",onChange:function(e){l(e.target.value)}}),Object(u.jsx)("span",{className:"popup__input-error input-title-error"})]}),Object(u.jsxs)("label",{className:"popup__input-label",children:[Object(u.jsx)("input",{className:"popup__input popup__input_content_link",type:"url",name:"link",id:"input-image",placeholder:"Image link",required:!0,onChange:function(e){j(e.target.value)}}),Object(u.jsx)("span",{className:"popup__input-error input-image-error"})]})]})};var O=function(e){var t=e.isEditProfilePopupOpen,n=e.closeAllPopups,a=e.isEditAvatarPopupOpen,c=e.isAddPlacePopupOpen,i=e.isImagePopupOpen,s=e.card,o=e.onCardClick,l=e.onEditAvatarClick,p=e.onEditProfileClick,O=e.onAddPlaceClick,x=e.onUpdateUser,v=e.onUpdateAvatar,g=e.onAddPlace,C=e.handleCardLike,N=e.handleCardDelete,k=r.a.useContext(_);return Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)("div",{className:"page",children:[Object(u.jsx)(m,{isOpen:t,onClose:n,onUpdateUser:x}),Object(u.jsx)(h,{isOpen:a,onClose:n,onUpdateAvatar:v}),Object(u.jsx)(f,{isOpen:c,onClose:n,onAddPlace:g,onSubmit:g}),Object(u.jsx)(d,{name:"delete",title:"Are you sure?",submitText:"Yes",onClose:n}),Object(u.jsx)(b,{card:s,isOpen:i,onClose:n}),Object(u.jsxs)("section",{className:"profile",children:[Object(u.jsxs)("div",{className:"profile__image-container",children:[Object(u.jsx)("img",{src:k.avatar,alt:"",className:"profile__image"}),Object(u.jsx)("button",{className:"profile__button profile__button_type_image",onClick:l})]}),Object(u.jsxs)("div",{className:"profile__info",children:[Object(u.jsxs)("div",{className:"profile__inner",children:[Object(u.jsx)("h1",{className:"profile__name",children:k.name}),Object(u.jsx)("button",{"aria-label":"edit",type:"button",className:"profile__button profile__button-hover profile__button_type_edit",onClick:p})]}),Object(u.jsx)("p",{className:"profile__description",children:k.about})]}),Object(u.jsx)("button",{"aria-label":"add",type:"button",className:"profile__button profile__button-hover profile__button_type_add",onClick:O})]}),Object(u.jsx)("section",{className:"cards",children:e.cards.map((function(e){return Object(u.jsx)(j,{card:e,onCardClick:o,onCardLike:C,onCardDelete:N},e._id)}))})]})})};var x=function(){return Object(u.jsx)(r.a.Fragment,{children:Object(u.jsx)("footer",{className:"footer",children:Object(u.jsx)("p",{className:"footer__copyright",children:"\xa9 2021 Around The U.S."})})})},v=n(7),g=n(8),C=function(e,t){return fetch(e,t).then((function(e){return e.ok?e.json():Promise.reject(e.statusText)}))},N=new(function(){function e(t){var n=t.baseUrl,a=t.headers;Object(v.a)(this,e),this._headers=a,this._baseUrl=n}return Object(g.a)(e,[{key:"getInitialCards",value:function(){return C("".concat(this._baseUrl,"/cards"),{headers:this._headers})}},{key:"getUserinfo",value:function(){return C("".concat(this._baseUrl,"/users/me"),{headers:this._headers})}},{key:"updateUserInfo",value:function(e){return C("".concat(this._baseUrl,"/users/me"),{headers:this._headers,method:"PATCH",body:JSON.stringify({name:e.name,about:e.about})})}},{key:"createCard",value:function(e){return C("".concat(this._baseUrl,"/cards"),{headers:this._headers,method:"POST",body:JSON.stringify(e)})}},{key:"deleteCard",value:function(e){return C("".concat(this._baseUrl,"/cards/").concat(e),{headers:this._headers,method:"DELETE"})}},{key:"changeLikeCardStatus",value:function(e,t){return C("".concat(this._baseUrl,"/cards/likes/").concat(e),{headers:this._headers,method:t?"PUT":"DELETE"})}},{key:"setUserAvatar",value:function(e){return C("".concat(this._baseUrl,"/users/me/avatar"),{headers:this._headers,method:"PATCH",body:JSON.stringify(e)})}}]),e}())({baseUrl:"https://around.nomoreparties.co/v1/group-12",headers:{authorization:"777d758a-9062-4c9b-9afe-60fcbfab24e6","Content-Type":"application/json"}});var k=function(){var e=Object(a.useState)({}),t=Object(o.a)(e,2),n=t[0],c=t[1],i=Object(a.useState)(!1),l=Object(o.a)(i,2),d=l[0],b=l[1],j=Object(a.useState)(!1),m=Object(o.a)(j,2),h=m[0],f=m[1],v=Object(a.useState)(!1),g=Object(o.a)(v,2),C=g[0],k=g[1],y=Object(a.useState)(!1),U=Object(o.a)(y,2),P=U[0],S=U[1],A=Object(a.useState)({}),E=Object(o.a)(A,2),T=E[0],L=E[1],D=Object(a.useState)([]),I=Object(o.a)(D,2),F=I[0],J=I[1];r.a.useEffect((function(){N.getUserinfo().then(L).catch((function(e){return console.error("user info error",e)}))}),[]),r.a.useEffect((function(){N.getInitialCards().then(J).catch((function(e){return console.error("initial cards error",e)}))}),[F]);var q=function(){b(!1),f(!1),k(!1),S(!1)};return Object(u.jsx)(_.Provider,{value:T,children:Object(u.jsxs)("div",{className:"page",children:[Object(u.jsx)(p,{}),Object(u.jsx)(O,{onEditProfileClick:function(){b(!0)},onAddPlaceClick:function(){f(!0)},onEditAvatarClick:function(){k(!0)},onCardClick:function(e){c(e),S(!0)},isEditProfilePopupOpen:d,isAddPlacePopupOpen:h,isEditAvatarPopupOpen:C,isImagePopupOpen:P,onUpdateUser:function(e){N.updateUserInfo(e).then(L).then(q).catch((function(e){return console.error("update user error",e)}))},onUpdateAvatar:function(e){N.setUserAvatar(e).then(L).then(q).catch((function(e){return console.error("update avatar error",e)}))},onAddPlace:function(e){N.createCard(e).then((function(e){J([e].concat(Object(s.a)(F)))})).then(q).catch((function(e){return console.error("add place error",e)}))},card:n,closeAllPopups:q,handleCardLike:function(e){var t=e.likes.some((function(e){return e._id===T._id}));N.changeLikeCardStatus(e._id,!t).then((function(t){J((function(n){return n.map((function(n){return n._id===e._id?t:n}))}))})).catch((function(e){return console.error("like card error",e)}))},handleCardDelete:function(e){N.deleteCard(e._id).then((function(e){return F.filter(e)})).catch((function(e){return console.error("delete card error",e)}))},cards:F,currentUser:T}),Object(u.jsx)(x,{})]})})},y=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,17)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),a(e),r(e),c(e),i(e)}))};i.a.render(Object(u.jsx)(r.a.StrictMode,{children:Object(u.jsx)(k,{})}),document.getElementById("root")),y()}},[[16,1,2]]]);
//# sourceMappingURL=main.711f7fe8.chunk.js.map